/*! wangkuan - 2015-11-04 14:09:22 */
define(function(require,exports,module){"use strict";var $=require("$"),common=require("../common/common"),Router=function(){this._version=1,this._start=!1};return Router.prototype={extend:function(obj){return $.extend(!0,this,obj)},render:function(html,back){var container=$(back.container);container.html(html),back.callBack?back.callBack():""},watch:function(){var url=common.getUrl()||"index",callBack=this.config.hasOwnProperty(url)?this.config[url]:"index",back={};if(this.hasOwnProperty(callBack)){if("function"==typeof this[callBack])var back=this[callBack]();else if("object"==typeof this[callBack])var back=this[callBack];back=$.extend(!0,this["#"],back)}if(back.html){var self=this;common.getHtml(back.view).then(function(html){self.render(html,back)})}else{var html=back.view;this.render(html,back)}},start:function(){if(this._start)throw new Error("Router had started!");return this._start=!0,window.onhashchange=function(){this.watch()}.bind(this),this.watch(),this},stop:function(){this._start=!1,window.onhashchange=null}},Router});